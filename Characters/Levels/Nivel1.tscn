[gd_scene load_steps=20 format=3 uid="uid://veoy0a2cqwy3"]

[ext_resource type="PackedScene" uid="uid://btrro60kficv0" path="res://Level.tscn" id="1_4web7"]
[ext_resource type="PackedScene" path="res://Characters/Enemies/asteroids_spawner.tscn" id="2_4xoaf"]
[ext_resource type="Script" path="res://Characters/AsteroidConfig.gd" id="3_kaj0i"]
[ext_resource type="PackedScene" uid="uid://c7j67qq323h2d" path="res://Characters/Enemies/mecha_locust_spawner.tscn" id="4_dfj5b"]
[ext_resource type="PackedScene" uid="uid://bd6uqjn1mckrm" path="res://Characters/Enemies/mecha_squirrel.tscn" id="5_6c7ao"]
[ext_resource type="Script" path="res://Characters/Levels/Boss.gd" id="6_m7v47"]
[ext_resource type="Script" path="res://Effects/destroyed_effect.gd" id="7_vald8"]
[ext_resource type="PackedScene" uid="uid://bn2i4wh1nddx0" path="res://Characters/Enemies/Floralis3D.tscn" id="8_018x0"]
[ext_resource type="Script" path="res://Characters/Levels/BossInfo.gd" id="8_b46qx"]
[ext_resource type="AudioStream" uid="uid://bdbhu25bcggud" path="res://media/sound/Squirrel_screech.wav" id="9_apsmg"]

[sub_resource type="Resource" id="Resource_1f6op"]
resource_local_to_scene = true
script = ExtResource("3_kaj0i")
speed_bounds = Vector2(-40, 300)
angle_bounds_degrees = Vector2(-30, 30)
scale_bounds = Vector2(0.2, 0.5)
origin_bounds = Vector2(0.1, 0.9)

[sub_resource type="Resource" id="Resource_7xhpt"]
resource_local_to_scene = true
script = ExtResource("3_kaj0i")
speed_bounds = Vector2(-40, 500)
angle_bounds_degrees = Vector2(-30, 30)
scale_bounds = Vector2(0.2, 0.7)
origin_bounds = Vector2(0.1, 0.9)

[sub_resource type="Resource" id="Resource_422me"]
resource_local_to_scene = true
script = ExtResource("3_kaj0i")
speed_bounds = Vector2(-40, 600)
angle_bounds_degrees = Vector2(-30, 30)
scale_bounds = Vector2(0.5, 1)
origin_bounds = Vector2(0.1, 0.9)

[sub_resource type="Resource" id="Resource_gkl4x"]
resource_local_to_scene = true
script = ExtResource("3_kaj0i")
speed_bounds = Vector2(0, 600)
angle_bounds_degrees = Vector2(-30, 30)
scale_bounds = Vector2(0.5, 1.5)
origin_bounds = Vector2(0.1, 0.9)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qppq6"]
size = Vector2(401.51, 704.965)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_m7o0r"]
radius = 8.0
height = 26.0

[sub_resource type="CircleShape2D" id="CircleShape2D_nr0mv"]
radius = 450.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_ocqbp"]
height = 35.9997

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_gct0q"]
width = 1920
height = 1080

[node name="Nivel1" instance=ExtResource("1_4web7")]

[node name="ParallaxLayer" parent="ParallaxBackground" index="1"]
modulate = Color(1, 1, 1, 0.392157)

[node name="AsteroidsSpawner1" parent="Travel" index="3" instance=ExtResource("2_4xoaf")]
position = Vector2(-379, 1983)
time_between_spawns_bounds = Vector2(0.2, 0.4)
max_asteroid_points_in_screen = 5.0
asteroid_config = SubResource("Resource_1f6op")

[node name="VisibleOnScreenEnabler2D" parent="Travel/AsteroidsSpawner1" index="0"]
position = Vector2(0, -679)

[node name="AsteroidsSpawner2" parent="Travel" index="4" instance=ExtResource("2_4xoaf")]
position = Vector2(-379, 2782)
max_asteroid_points_in_screen = 4.0
asteroid_config = SubResource("Resource_7xhpt")

[node name="VisibleOnScreenEnabler2D" parent="Travel/AsteroidsSpawner2" index="0"]
position = Vector2(0, -679)

[node name="AsteroidsSpawner6" parent="Travel" index="5" instance=ExtResource("2_4xoaf")]
position = Vector2(-379, 3364)
max_asteroid_points_in_screen = 5.0
asteroid_config = SubResource("Resource_422me")

[node name="VisibleOnScreenEnabler2D" parent="Travel/AsteroidsSpawner6" index="0"]
position = Vector2(0, -679)

[node name="AsteroidsSpawner7" parent="Travel" index="6" instance=ExtResource("2_4xoaf")]
position = Vector2(-363, 3744)
time_between_spawns_bounds = Vector2(0.1, 0.25)
max_asteroid_points_in_screen = 10.0
asteroid_config = SubResource("Resource_gkl4x")

[node name="VisibleOnScreenEnabler2D" parent="Travel/AsteroidsSpawner7" index="0"]
position = Vector2(0, -679)

[node name="MechaLocustSpawner" parent="Travel" index="7" node_paths=PackedStringArray("target_spaceship") instance=ExtResource("4_dfj5b")]
position = Vector2(943, 1449)
target_spaceship = NodePath("../../Spaceship")

[node name="MechaLocustSpawner2" parent="Travel" index="8" node_paths=PackedStringArray("target_spaceship") instance=ExtResource("4_dfj5b")]
position = Vector2(414, 2431)
rotation = 0.354186
target_spaceship = NodePath("../../Spaceship")

[node name="MechaLocustSpawner3" parent="Travel" index="9" node_paths=PackedStringArray("target_spaceship") instance=ExtResource("4_dfj5b")]
position = Vector2(1436, 2799)
rotation = -0.547964
target_spaceship = NodePath("../../Spaceship")

[node name="mecha_squirrel" parent="Travel" index="10" instance=ExtResource("5_6c7ao")]
position = Vector2(647, 3024)

[node name="mecha_squirrel2" parent="Travel" index="11" instance=ExtResource("5_6c7ao")]
position = Vector2(1441, 2559)
rotation = -0.431142

[node name="mecha_squirrel3" parent="Travel" index="12" instance=ExtResource("5_6c7ao")]
position = Vector2(1320, 3120)
rotation = -0.431142

[node name="mecha_squirrel4" parent="Travel" index="13" instance=ExtResource("5_6c7ao")]
position = Vector2(1305, 960)
rotation = -0.00904059

[node name="Boss" type="CharacterBody2D" parent="Travel" index="14"]
position = Vector2(906, 3852)
scale = Vector2(0.515554, 0.509245)
collision_layer = 1073741828
collision_mask = 0
script = ExtResource("6_m7v47")
max_health = 3000.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Travel/Boss" index="0"]
position = Vector2(10.6682, -105.058)
scale = Vector2(1, 0.999999)
shape = SubResource("RectangleShape2D_qppq6")

[node name="DestroyedEffect" type="Node2D" parent="Travel/Boss" index="1"]
script = ExtResource("7_vald8")

[node name="VisibleOnScreenEnabler2D" type="VisibleOnScreenEnabler2D" parent="Travel/Boss" index="2"]

[node name="Hitbox" type="Area2D" parent="Travel/Boss" index="3"]
collision_layer = 4
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Travel/Boss/Hitbox" index="0"]
position = Vector2(0, -3)
shape = SubResource("CapsuleShape2D_m7o0r")

[node name="DetectionArea" type="Area2D" parent="Travel/Boss" index="4"]
visible = false
collision_layer = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Travel/Boss/DetectionArea" index="0"]
shape = SubResource("CircleShape2D_nr0mv")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Travel/Boss" index="5"]
visible = false
position = Vector2(0, 3)
rotation = -0.00349154
shape = SubResource("CapsuleShape2D_ocqbp")

[node name="DestroyedEffect2" type="Node2D" parent="Travel/Boss" index="6"]
script = ExtResource("7_vald8")
explosion_time = 0.1
stretch = Vector2(2, 0.1)

[node name="Sound" type="AudioStreamPlayer" parent="Travel/Boss" index="7"]
stream = ExtResource("9_apsmg")

[node name="VisibleOnScreenEnabler2D2" type="VisibleOnScreenEnabler2D" parent="Travel/Boss" index="8"]
rect = Rect2(-10, -50, 20, 200)

[node name="SubViewportContainer" type="SubViewportContainer" parent="Travel/Boss" index="9"]
process_mode = 3
offset_left = 773.912
offset_top = 663.705
offset_right = 1285.91
offset_bottom = 1175.71
rotation = 3.14935
scale = Vector2(3, 3)

[node name="SubViewport" type="SubViewport" parent="Travel/Boss/SubViewportContainer" index="0"]
own_world_3d = true
transparent_bg = true
handle_input_locally = false
render_target_update_mode = 4

[node name="Squirrel3D" parent="Travel/Boss/SubViewportContainer/SubViewport" index="0" instance=ExtResource("8_018x0")]

[node name="CanvasLayer" type="CanvasLayer" parent="." index="7"]
layer = 0

[node name="FadeOut" type="Sprite2D" parent="CanvasLayer" index="0"]
modulate = Color(0, 0, 0, 0)
z_index = 4096
z_as_relative = false
texture = SubResource("NoiseTexture2D_gct0q")
centered = false

[node name="TestCamera" type="Camera2D" parent="." index="8"]
anchor_mode = 0
zoom = Vector2(0.2, 0.2)

[node name="BossInfo" type="Label" parent="HUDLayer" index="3"]
visible = false
offset_top = 688.0
offset_right = 40.0
offset_bottom = 711.0
script = ExtResource("8_b46qx")

[node name="AsteroidsInfo" parent="HUDLayer" index="4"]
visible = false

[node name="ParallaxInfo" parent="HUDLayer" index="5"]
visible = false

[editable path="Travel/AsteroidsSpawner1"]
[editable path="Travel/AsteroidsSpawner2"]
[editable path="Travel/AsteroidsSpawner6"]
[editable path="Travel/AsteroidsSpawner7"]
[editable path="Spaceship"]
